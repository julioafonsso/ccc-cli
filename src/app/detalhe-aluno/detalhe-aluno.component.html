<p-growl [value]="msgs" life=6000></p-growl>
<div>
  <div class="card">
    <div class="card__header">
    </div>
    <div class="card__avatar">
      <img class="card__avatar__img" alt="" [src]="aluno.foto">
    </div>
    <div class="card__info">
      <div class="card__info__title">
        {{aluno.nome}}
      </div>
    </div>
  </div>
</div>

<div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
  <div class="btn-group" role="group">
    <button type="button" id="perfil" [ngClass]="{'btn': true, 'btn-default': !getTabAtiva(0), 'btn-primary': getTabAtiva(0)}"
      (click)="tabBios()" href="#tabBios" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                <div class="hidden-xs">Perfil</div>
            </button>
  </div>

  <div class="btn-group" role="group">
    <button type="button" id="turmas" [ngClass]="{'btn': true, 'btn-default': !getTabAtiva(1), 'btn-primary': getTabAtiva(1)}"
      (click)="tabTurmas()" href="#tabTurmas" data-toggle="tab"><span class="glyphicon glyphicon-text-size" aria-hidden="true"></span>
                <div class="hidden-xs">Turmas</div>
            </button>
  </div>

  <div class="btn-group" role="group">
    <button type="button" id="debitos" [ngClass]="{'btn': true, 'btn-default': !getTabAtiva(2), 'btn-primary': getTabAtiva(2)}"
      (click)="tabDebitos()" href="#tabDebitos" data-toggle="tab"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
                <div class="hidden-xs">Debitos</div>
            </button>
  </div>

<div class="btn-group" role="group">
    <button type="button" id="debitos" [ngClass]="{'btn': true, 'btn-default': !getTabAtiva(3), 'btn-primary': getTabAtiva(3)}"
      (click)="tabHistPag()" href="#tabHistPag" data-toggle="tab"><span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
                <div class="hidden-xs">Historico Pagamento</div>
            </button>
  </div>

  <div class="btn-group" role="group">
    <button type="button" id="editar" class="btn btn-default" [routerLink]="['/manutencao-aluno', aluno.id]"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                <div class="hidden-xs">Editar</div>
            </button>
  </div>


</div>

<div class="well">
  <div class="tab-content">
    <div class="tab-pane active" id="tabBios">
      <div class="card__info">
        <div class="card__info__detalhes"><label>Email: </ label>{{aluno.email}}</div>
          <div class="card__info__detalhes"><label>Telefone: </label> {{aluno.telefone}}</div>
        <div class="card__info__detalhes"><label>CPF: </label> {{aluno.cpf}}</div>
        <div class="card__info__detalhes"><label>RG: </label> {{aluno.rg}}</div>
        <div class="card__info__detalhes"><label>Data Nascimento: </label> {{aluno.dataNascimento | date: 'dd/MM/yyyy'}}</div>
        <div class="card__info__detalhes"><label>Endereco: </label> {{aluno.endereco}}</div>
        <div class="card__info__detalhes"><label>Numero: </label> {{aluno.numero}}</div>
        <div class="card__info__detalhes"><label>Complemento: </label> {{aluno.complemento}}</div>
        <div class="card__info__detalhes"><label>Estado Civil: </label> {{aluno.estadoCivil.nome}}</div>
        <div class="card__info__detalhes"><label>Sexo: </label> {{aluno.sexo}}</div>
        <div class="card__info__detalhes"><label>Profiss√£o: </label> {{aluno.profissao}}</div>
        <div class="card__info__detalhes"><label>Como Conheceu: </label> {{aluno.conheceEscola?.nome}}</div>

      </div>
    </div>

    <div class="tab-pane " id="tabTurmas">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
          <thead>
            <tr>
              <th>Codigo</th>
              <th>Modalidade</th>
              <th>Nivel</th>
              <th>Sala</th>
              <th>Dia Vencimento</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let matricula of matriculas">
              <td>{{matricula.turma.codigo}}</td>
              <td>{{matricula.turma.modalidade.nome}}</td>
              <td>{{matricula.turma.nivel.nome}}</td>
              <td>{{matricula.turma.sala.nome}}</td>
              <td>{{matricula.diaVencimento}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <div class="tab-pane " id="tabDebitos">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
          <thead>
            <tr>
              <th>Codigo</th>
              <th>Modalidade</th>
              <th>Nivel</th>
              <th>Vencimento</th>
              <th>Mes Referencia</th>
              <th>Mensalidade</th>
              <th>Valor para pagar</th>
              <th>Pagar</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let debito of debitos">
              <td>{{debito.matricula.turma.codigo}}</td>
              <td>{{debito.matricula.turma.modalidade.nome}}</td>
              <td>{{debito.matricula.turma.nivel.nome}}</td>
              <td>{{debito.dataVencimento | date: 'dd/MM/yyyy'}}</td>
              <td>{{debito.mesReferencia.mes}}/{{debito.mesReferencia.ano}}</td>
              <td>{{debito.matricula.turma.mensalidade | currency:'BRL':true}}</td>
              <td>{{debito.valorCalculado | currency:'BRL':true}}</td>
              <td><button [disabled]="submit" class="btn btn-primary" (click)="pagarMensalidade(debito)">Pagar Mensalidade</button>
                <button [disabled]="submit" class="btn btn-success" (click)="pagarMensalidadeCalculada(debito)" *ngIf="debito.valorCalculado< debito.matricula.turma.mensalidade">Pagar com Desconto</button>
                <button [disabled]="submit" class="btn btn-danger" (click)="pagarMensalidadeCalculada(debito)" *ngIf="debito.valorCalculado> debito.matricula.turma.mensalidade">Pagar com Multa</button>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <div class="tab-pane " id="tabHistPag">
      De: <input [(ngModel)]="dataInicio" id="de" type="month"> Ate: <input [(ngModel)]="dataFim" id="ate" type="month" > <button (click)="pesquisar()" class="btn btn-primary">Pesquisar</button>
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
          <thead>
            <tr>
              <th>Codigo</th>
              <th>Modalidade</th>
              <th>Nivel</th>
              <th>Mes Referencia</th>
              <th>Vencimento</th>
              <th>Data Pagamento</th>
              <th>Valor Pago</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let debito of histPagamento">
              <td>{{debito.matricula.turma.codigo}}</td>
              <td>{{debito.matricula.turma.modalidade.nome}}</td>
              <td>{{debito.matricula.turma.nivel.nome}}</td>
              <td>{{debito.mesReferencia.mes}}/{{debito.mesReferencia.ano}}</td>
              <td>{{debito.dataVencimento | date: 'dd/MM/yyyy'}}</td>
              <td>{{debito.fluxoCaixa.data | date: 'dd/MM/yyyy'}}</td>
              <td>{{debito.fluxoCaixa.valor | currency:'BRL':true}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


  </div>
</div>